function cov_399vupmve() {
  var path = "H:\\Michele\\Universit\xE0\\Magistrale Polito\\Software Engineering II\\SPG\\SPG\\client\\src\\api\\user.js";
  var hash = "5a50c3eeb337e3292910773f50f23f2add4893d5";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "H:\\Michele\\Universit\xE0\\Magistrale Polito\\Software Engineering II\\SPG\\SPG\\client\\src\\api\\user.js",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 19
        },
        end: {
          line: 7,
          column: 53
        }
      },
      "1": {
        start: {
          line: 8,
          column: 23
        },
        end: {
          line: 8,
          column: 44
        }
      },
      "2": {
        start: {
          line: 9,
          column: 2
        },
        end: {
          line: 11,
          column: 28
        }
      },
      "3": {
        start: {
          line: 10,
          column: 4
        },
        end: {
          line: 10,
          column: 24
        }
      },
      "4": {
        start: {
          line: 11,
          column: 9
        },
        end: {
          line: 11,
          column: 28
        }
      },
      "5": {
        start: {
          line: 16,
          column: 2
        },
        end: {
          line: 42,
          column: 5
        }
      },
      "6": {
        start: {
          line: 17,
          column: 4
        },
        end: {
          line: 41,
          column: 9
        }
      },
      "7": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 37,
          column: 9
        }
      },
      "8": {
        start: {
          line: 22,
          column: 10
        },
        end: {
          line: 22,
          column: 24
        }
      },
      "9": {
        start: {
          line: 25,
          column: 10
        },
        end: {
          line: 36,
          column: 15
        }
      },
      "10": {
        start: {
          line: 28,
          column: 14
        },
        end: {
          line: 28,
          column: 26
        }
      },
      "11": {
        start: {
          line: 31,
          column: 14
        },
        end: {
          line: 35,
          column: 17
        }
      },
      "12": {
        start: {
          line: 40,
          column: 8
        },
        end: {
          line: 40,
          column: 77
        }
      },
      "13": {
        start: {
          line: 47,
          column: 4
        },
        end: {
          line: 63,
          column: 4
        }
      },
      "14": {
        start: {
          line: 48,
          column: 2
        },
        end: {
          line: 62,
          column: 86
        }
      },
      "15": {
        start: {
          line: 55,
          column: 3
        },
        end: {
          line: 61,
          column: 4
        }
      },
      "16": {
        start: {
          line: 56,
          column: 4
        },
        end: {
          line: 56,
          column: 18
        }
      },
      "17": {
        start: {
          line: 58,
          column: 4
        },
        end: {
          line: 60,
          column: 80
        }
      },
      "18": {
        start: {
          line: 59,
          column: 26
        },
        end: {
          line: 59,
          column: 42
        }
      },
      "19": {
        start: {
          line: 60,
          column: 20
        },
        end: {
          line: 60,
          column: 76
        }
      },
      "20": {
        start: {
          line: 62,
          column: 19
        },
        end: {
          line: 62,
          column: 82
        }
      },
      "21": {
        start: {
          line: 66,
          column: 16
        },
        end: {
          line: 70,
          column: 1
        }
      }
    },
    fnMap: {
      "0": {
        name: "getUserId",
        decl: {
          start: {
            line: 6,
            column: 15
          },
          end: {
            line: 6,
            column: 24
          }
        },
        loc: {
          start: {
            line: 6,
            column: 32
          },
          end: {
            line: 12,
            column: 1
          }
        },
        line: 6
      },
      "1": {
        name: "deleteUser",
        decl: {
          start: {
            line: 15,
            column: 15
          },
          end: {
            line: 15,
            column: 25
          }
        },
        loc: {
          start: {
            line: 15,
            column: 33
          },
          end: {
            line: 43,
            column: 1
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 16,
            column: 21
          },
          end: {
            line: 16,
            column: 22
          }
        },
        loc: {
          start: {
            line: 16,
            column: 42
          },
          end: {
            line: 42,
            column: 3
          }
        },
        line: 16
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 20,
            column: 12
          },
          end: {
            line: 20,
            column: 13
          }
        },
        loc: {
          start: {
            line: 20,
            column: 26
          },
          end: {
            line: 38,
            column: 7
          }
        },
        line: 20
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 27,
            column: 18
          },
          end: {
            line: 27,
            column: 19
          }
        },
        loc: {
          start: {
            line: 27,
            column: 27
          },
          end: {
            line: 29,
            column: 13
          }
        },
        line: 27
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 30,
            column: 19
          },
          end: {
            line: 30,
            column: 20
          }
        },
        loc: {
          start: {
            line: 30,
            column: 28
          },
          end: {
            line: 36,
            column: 13
          }
        },
        line: 30
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 39,
            column: 13
          },
          end: {
            line: 39,
            column: 14
          }
        },
        loc: {
          start: {
            line: 39,
            column: 22
          },
          end: {
            line: 41,
            column: 7
          }
        },
        line: 39
      },
      "7": {
        name: "addClient",
        decl: {
          start: {
            line: 46,
            column: 15
          },
          end: {
            line: 46,
            column: 24
          }
        },
        loc: {
          start: {
            line: 46,
            column: 36
          },
          end: {
            line: 64,
            column: 1
          }
        },
        line: 46
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 47,
            column: 23
          },
          end: {
            line: 47,
            column: 24
          }
        },
        loc: {
          start: {
            line: 47,
            column: 44
          },
          end: {
            line: 63,
            column: 2
          }
        },
        line: 47
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 54,
            column: 10
          },
          end: {
            line: 54,
            column: 11
          }
        },
        loc: {
          start: {
            line: 54,
            column: 24
          },
          end: {
            line: 62,
            column: 3
          }
        },
        line: 54
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 59,
            column: 11
          },
          end: {
            line: 59,
            column: 12
          }
        },
        loc: {
          start: {
            line: 59,
            column: 24
          },
          end: {
            line: 59,
            column: 44
          }
        },
        line: 59
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 60,
            column: 12
          },
          end: {
            line: 60,
            column: 13
          }
        },
        loc: {
          start: {
            line: 60,
            column: 18
          },
          end: {
            line: 60,
            column: 78
          }
        },
        line: 60
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 62,
            column: 11
          },
          end: {
            line: 62,
            column: 12
          }
        },
        loc: {
          start: {
            line: 62,
            column: 17
          },
          end: {
            line: 62,
            column: 84
          }
        },
        line: 62
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 9,
            column: 2
          },
          end: {
            line: 11,
            column: 28
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 9,
            column: 2
          },
          end: {
            line: 11,
            column: 28
          }
        }, {
          start: {
            line: 9,
            column: 2
          },
          end: {
            line: 11,
            column: 28
          }
        }],
        line: 9
      },
      "1": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 37,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 37,
            column: 9
          }
        }, {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 37,
            column: 9
          }
        }],
        line: 21
      },
      "2": {
        loc: {
          start: {
            line: 55,
            column: 3
          },
          end: {
            line: 61,
            column: 4
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 55,
            column: 3
          },
          end: {
            line: 61,
            column: 4
          }
        }, {
          start: {
            line: 55,
            column: 3
          },
          end: {
            line: 61,
            column: 4
          }
        }],
        line: 55
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "5a50c3eeb337e3292910773f50f23f2add4893d5"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }

  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_399vupmve = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}

cov_399vupmve();

/**
 *
 * @param {*} email
 * @returns
 */
async function getUserId(email) {
  cov_399vupmve().f[0]++;
  const response = (cov_399vupmve().s[0]++, await fetch("/api/users/" + email));
  const respondeBody = (cov_399vupmve().s[1]++, await response.json());
  cov_399vupmve().s[2]++;

  if (response.ok) {
    cov_399vupmve().b[0][0]++;
    cov_399vupmve().s[3]++;
    return respondeBody;
  } else {
    cov_399vupmve().b[0][1]++;
    cov_399vupmve().s[4]++;
    throw respondeBody;
  }
} //Delete user


async function deleteUser(email) {
  cov_399vupmve().f[1]++;
  cov_399vupmve().s[5]++;
  return new Promise((resolve, reject) => {
    cov_399vupmve().f[2]++;
    cov_399vupmve().s[6]++;
    fetch("/api/clients/" + email, {
      method: "DELETE"
    }).then(response => {
      cov_399vupmve().f[3]++;
      cov_399vupmve().s[7]++;

      if (response.ok) {
        cov_399vupmve().b[1][0]++;
        cov_399vupmve().s[8]++;
        resolve(null);
      } else {
        cov_399vupmve().b[1][1]++;
        cov_399vupmve().s[9]++;
        // analyze the cause of error
        response.json().then(obj => {
          cov_399vupmve().f[4]++;
          cov_399vupmve().s[10]++;
          reject(obj);
        }) // error msg in the response body
        .catch(err => {
          cov_399vupmve().f[5]++;
          cov_399vupmve().s[11]++;
          reject({
            errors: [{
              param: "Application",
              msg: "Cannot parse server response"
            }]
          });
        }); // something else
      }
    }).catch(err => {
      cov_399vupmve().f[6]++;
      cov_399vupmve().s[12]++;
      reject({
        errors: [{
          param: "Server",
          msg: "Cannot communicate"
        }]
      });
    }); // connection errors
  });
} // The parameter is an object like email: {"new.user@demo.it", password: "password", username: "username", name: "name", surname: "surname"}


async function addClient(newClient) {
  cov_399vupmve().f[7]++;
  cov_399vupmve().s[13]++;
  return new Promise((resolve, reject) => {
    cov_399vupmve().f[8]++;
    cov_399vupmve().s[14]++;
    fetch('/api/newClient', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(newClient)
    }).then(response => {
      cov_399vupmve().f[9]++;
      cov_399vupmve().s[15]++;

      if (response.ok) {
        cov_399vupmve().b[2][0]++;
        cov_399vupmve().s[16]++;
        resolve(null);
      } else {
        cov_399vupmve().b[2][1]++;
        cov_399vupmve().s[17]++;
        response.json().then(message => {
          cov_399vupmve().f[10]++;
          cov_399vupmve().s[18]++;
          reject(message);
        }) // error message in the response body
        .catch(() => {
          cov_399vupmve().f[11]++;
          cov_399vupmve().s[19]++;
          reject({
            error: "Impossible to read server response."
          });
        }); // something else
      }
    }).catch(() => {
      cov_399vupmve().f[12]++;
      cov_399vupmve().s[20]++;
      reject({
        error: "Impossible to communicate with the server."
      });
    }); // connection errors
  });
}

const userAPI = (cov_399vupmve().s[21]++, {
  getUserId,
  deleteUser,
  addClient
});
export default userAPI;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiZ2V0VXNlcklkIiwiZW1haWwiLCJyZXNwb25zZSIsImZldGNoIiwicmVzcG9uZGVCb2R5IiwianNvbiIsIm9rIiwiZGVsZXRlVXNlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibWV0aG9kIiwidGhlbiIsIm9iaiIsImNhdGNoIiwiZXJyIiwiZXJyb3JzIiwicGFyYW0iLCJtc2ciLCJhZGRDbGllbnQiLCJuZXdDbGllbnQiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXNzYWdlIiwiZXJyb3IiLCJ1c2VyQVBJIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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O0FBQUVmLFVBQUFBLE1BQU0sQ0FBQ2UsT0FBRCxDQUFOO0FBQWtCLFNBRHhDLEVBQzBDO0FBRDFDLFNBRUVYLEtBRkYsQ0FFUSxNQUFNO0FBQUE7QUFBQTtBQUFFSixVQUFBQSxNQUFNLENBQUM7QUFBRWdCLFlBQUFBLEtBQUssRUFBRTtBQUFULFdBQUQsQ0FBTjtBQUEwRCxTQUYxRSxFQURNLENBR3VFO0FBQzdFO0FBQ0QsS0FkRCxFQWNHWixLQWRILENBY1MsTUFBTTtBQUFBO0FBQUE7QUFBRUosTUFBQUEsTUFBTSxDQUFDO0FBQUVnQixRQUFBQSxLQUFLLEVBQUU7QUFBVCxPQUFELENBQU47QUFBaUUsS0FkbEYsRUFEMEMsQ0FlMkM7QUFDckYsR0FoQlMsQ0FBUDtBQWlCSDs7QUFFRCxNQUFNQyxPQUFPLDZCQUFHO0FBQ2QzQixFQUFBQSxTQURjO0FBRWRPLEVBQUFBLFVBRmM7QUFHZFksRUFBQUE7QUFIYyxDQUFILENBQWI7QUFNQSxlQUFlUSxPQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gZW1haWxcclxuICogQHJldHVybnNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJZChlbWFpbCkge1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvYXBpL3VzZXJzL1wiICsgZW1haWwpO1xyXG4gIGNvbnN0IHJlc3BvbmRlQm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgIHJldHVybiByZXNwb25kZUJvZHk7XHJcbiAgfSBlbHNlIHRocm93IHJlc3BvbmRlQm9keTtcclxufVxyXG5cclxuLy9EZWxldGUgdXNlclxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKGVtYWlsKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGZldGNoKFwiL2FwaS9jbGllbnRzL1wiICsgZW1haWwsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBhbmFseXplIHRoZSBjYXVzZSBvZiBlcnJvclxyXG4gICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICAgICAgLmpzb24oKVxyXG4gICAgICAgICAgICAudGhlbigob2JqKSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KG9iaik7XHJcbiAgICAgICAgICAgIH0pIC8vIGVycm9yIG1zZyBpbiB0aGUgcmVzcG9uc2UgYm9keVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICBlcnJvcnM6IFtcclxuICAgICAgICAgICAgICAgICAgeyBwYXJhbTogXCJBcHBsaWNhdGlvblwiLCBtc2c6IFwiQ2Fubm90IHBhcnNlIHNlcnZlciByZXNwb25zZVwiIH0sXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTsgLy8gc29tZXRoaW5nIGVsc2VcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgcmVqZWN0KHsgZXJyb3JzOiBbeyBwYXJhbTogXCJTZXJ2ZXJcIiwgbXNnOiBcIkNhbm5vdCBjb21tdW5pY2F0ZVwiIH1dIH0pO1xyXG4gICAgICB9KTsgLy8gY29ubmVjdGlvbiBlcnJvcnNcclxuICB9KTtcclxufVxyXG5cclxuLy8gVGhlIHBhcmFtZXRlciBpcyBhbiBvYmplY3QgbGlrZSBlbWFpbDoge1wibmV3LnVzZXJAZGVtby5pdFwiLCBwYXNzd29yZDogXCJwYXNzd29yZFwiLCB1c2VybmFtZTogXCJ1c2VybmFtZVwiLCBuYW1lOiBcIm5hbWVcIiwgc3VybmFtZTogXCJzdXJuYW1lXCJ9XHJcbmFzeW5jIGZ1bmN0aW9uIGFkZENsaWVudChuZXdDbGllbnQpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRmZXRjaCgnL2FwaS9uZXdDbGllbnQnLCB7XHJcblx0XHQgIFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHQgIFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcblx0XHQgIFx0fSxcclxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkobmV3Q2xpZW50KVxyXG5cdFx0fSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuXHRcdFx0aWYgKHJlc3BvbnNlLm9rKSB7XHJcblx0XHRcdFx0cmVzb2x2ZShudWxsKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXNwb25zZS5qc29uKClcclxuXHRcdFx0XHRcdC50aGVuKChtZXNzYWdlKSA9PiB7IHJlamVjdChtZXNzYWdlKTsgfSkgLy8gZXJyb3IgbWVzc2FnZSBpbiB0aGUgcmVzcG9uc2UgYm9keVxyXG5cdFx0XHRcdFx0LmNhdGNoKCgpID0+IHsgcmVqZWN0KHsgZXJyb3I6IFwiSW1wb3NzaWJsZSB0byByZWFkIHNlcnZlciByZXNwb25zZS5cIiB9KSB9KTsgLy8gc29tZXRoaW5nIGVsc2VcclxuXHRcdFx0fVxyXG5cdFx0fSkuY2F0Y2goKCkgPT4geyByZWplY3QoeyBlcnJvcjogXCJJbXBvc3NpYmxlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIHNlcnZlci5cIiB9KSB9KTsgLy8gY29ubmVjdGlvbiBlcnJvcnNcclxuXHR9KTtcclxufVxyXG5cclxuY29uc3QgdXNlckFQSSA9IHtcclxuICBnZXRVc2VySWQsXHJcbiAgZGVsZXRlVXNlcixcclxuICBhZGRDbGllbnRcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZXJBUEk7XHJcbiJdfQ==